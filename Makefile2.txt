
CC=g++
BUILD_DIR=build
BIN_DIR =$(BUILD_DIR)/bin
EXECUTABLE=$(BIN_DIR)/run.exe
INC=-Isrc/ -Isrc/model -Isrc/genetic-algorithm -Itesting-data

src = $(wildcard src/*.cpp) $(wildcard src/*/*.cpp)
obj_files = $(notdir $(src:src/%.cpp=%.o))
obj = $(patsubst %, $(BUILD_DIR)/objs/%, $(obj_files))

.PHONY: all
all: dirs
all: $(EXECUTABLE)


.PHONY: dirs
dirs: 
	@echo $(obj)
	@echo $(src)
	if not exist build @mkdir build
	if not exist build/objs @mkdir build\objs
	if not exist build/bin @mkdir build\bin
	
$(EXECUTABLE): $(obj)
	$(CC) $(INC) -o $(EXECUTABLE) $^


$(obj): $(src)
	@echo "Compiling: $< -> $@"
	$(CC) $(INC) -c $< -o $@

.PHONY: clean
clean:
	rmdir $(BUILD_DIR) /s